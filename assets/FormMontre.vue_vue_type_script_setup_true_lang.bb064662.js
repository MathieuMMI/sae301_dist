import{d as k,r as C,w as v,o as y,c as _,e as a,m as x,f as E,g as V,a as l,n as c,u as h,h as B,s as u,i as S,j}from"./index.71cd0d33.js";const M={class:"flex justify-center gap-20"},$={class:"relative mb-5 mt-32"},A={class:"mb-5"},N={class:"relative"},T={class:"relative"},K=l("button",{type:"button",class:"focus-style justify-self-end rounded-md bg-blue-300 p-2 shadow-sm"}," Annuler",-1),z=k({__name:"FormMontre",props:{data:null,id:null},async setup(g){var f;let r,i;const d=g,p=j(),o=C((f=d.data)!=null?f:{});async function w(s,e){const{data:t,error:n}=await u.from("montre").upsert(s);n?e.setErrors([n.message]):(e.setErrors([]),p.push({name:"montre-edit-id",params:{id:t[0].idmontre}}))}if(d.id){let{data:s,error:e}=([r,i]=v(()=>u.from("montre").select("*").eq("idmontre",d.id)),r=await r,i(),r);e?console.log("n'a pas pu charger la table montre :",e):o.value=s[0]}const{data:m}=([r,i]=v(()=>u.from("materiaux").select("*")),r=await r,i(),r),b=m==null?void 0:m.map(s=>({value:s.idmateriaux,label:s.libelle}));async function F(){const{data:s,error:e}=await u.from("montre").delete().match({idmontre:o.value.idmontre});e?console.error("Erreur \xE0 la suppression de ",o.value,"erreur :",e):p.push("/montre/montre")}return(s,e)=>{const t=S("FormKit");return y(),_("div",M,[a(E,x({class:"w-[20%]"},o.value),null,16),a(t,{"submit-label":"Valider",type:"form",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value=n),onSubmit:w},{default:V(()=>[l("div",$,[a(t,{"label-class":"pl-10 absolute inset-0","input-class":"sr-only",type:"color",value:"#b3b3b3",name:"ecran",label:"Ecran"}),l("div",{class:"w-7 h-7 rounded-full border-2 border-black",style:c({backgroundColor:o.value.ecran})},null,4)]),l("div",A,[l("div",N,[a(t,{"label-class":"pl-10 absolute inset-0","input-class":"sr-only",type:"color",value:"#FFFFFF",name:"bracelet",label:"Bracelet"}),l("div",{class:"w-7 h-7 rounded-full border-2 border-black",style:c({backgroundColor:o.value.bracelet})},null,4)]),a(t,{type:"select",name:"idmateriel_bracelet",label:"Type de mat\xE9riel",options:h(b)},null,8,["options"])]),l("div",null,[l("div",T,[a(t,{"label-class":"pl-10 absolute inset-0","input-class":"sr-only",type:"color",value:"#FFFFFF",name:"boitier",label:"Boitier"}),l("div",{class:"w-7 h-7 rounded-full border-2 border-black",style:c({backgroundColor:o.value.boitier})},null,4)]),a(t,{type:"select",name:"idmateriel_boitier",label:"Type de mat\xE9riel",options:h(b)},null,8,["options"]),a(t,{type:"checkbox",name:"commande",label:"Commander",value:"false"}),a(t,{type:"checkbox",name:"afficher",label:"Afficher sur le site",value:"false"})]),o.value.idmontre?(y(),_("button",{key:0,type:"button",onClick:e[0]||(e[0]=n=>s.$refs.dialogSupprimer.showModal()),class:"focus-style justify-self-end rounded-md bg-red-500 p-2 shadow-sm"}," Supprimer l'offre ")):B("",!0),l("dialog",{ref:"dialogSupprimer",onClick:e[2]||(e[2]=n=>n.currentTarget.close())},[K,l("button",{type:"button",onClick:e[1]||(e[1]=n=>F()),class:"focus-style rounded-md bg-red-500 p-2 shadow-sm"}," Confirmer suppression ")],512)]),_:1},8,["modelValue"])])}}});export{z as _};
